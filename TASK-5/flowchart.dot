digraph AkilliEvGuvenlikSistemi {
    // Grafik ayarları
    graph [fontname="Helvetica", fontsize=12, labelloc="t", label="Akıllı Ev Güvenlik Sistemi Akış Diyagramı"];
    node [fontname="Helvetica", fontsize=10, style=filled];
    edge [fontname="Helvetica", fontsize=9];

    // Düğüm (Node) Tanımlamaları
    start [label="Başla", shape=ellipse, fillcolor=limegreen];
    init [label="Değişkenleri Başlat\nALARM_DURUMU = 'PASİF'", shape=box, fillcolor=lightblue];
    read_sensors [label="1. Tüm Sensörleri Oku\n(Hareket, Kapı, Kamera, Sıfırlama)", shape=box, fillcolor=lightblue];
    check_reset [label="Alarm Sıfırlama Komutu Var Mı?", shape=diamond, fillcolor=khaki];
    reset_alarm [label="Alarmı Sustur\nDurumu 'PASİF' Yap\nKullanıcıya Bildirim Gönder", shape=box, fillcolor=lightcoral];
    check_alarm_passive [label="ALARM_DURUMU 'PASİF' Mi?", shape=diamond, fillcolor=khaki];
    detect_threat [label="2. Tehdit Algıla ve Seviye Belirle", shape=box, fillcolor=lightblue];
    check_threat_level [label="3. Tehdit Seviyesi Nedir?", shape=diamond, fillcolor=khaki];
    
    action_high [label="YÜKSEK TEHDİT AKSİYONU\n- Alarmı Çal\n- Acil Bildirim Gönder\n- Durumu 'AKTİF' Yap", shape=box, fillcolor=red, fontcolor=white];
    action_medium [label="ORTA TEHDİT AKSİYONU\n- Alarmı Çal\n- Uyarı Bildirimi Gönder\n- Durumu 'AKTİF' Yap", shape=box, fillcolor=orange];
    action_low [label="DÜŞÜK TEHDİT AKSİYONU\n- Bilgi Bildirimi Gönder\n- Video Kaydet", shape=box, fillcolor=lightgoldenrodyellow];
    
    wait [label="Kısa Bir Süre Bekle", shape=box, fillcolor=lightgrey];

    // Akış Bağlantıları (Edges)
    start -> init;
    init -> read_sensors;

    // Döngü içi akış
    read_sensors -> check_reset;
    check_reset -> reset_alarm [label="Evet"];
    check_reset -> check_alarm_passive [label="Hayır"];
    
    reset_alarm -> wait;
    
    check_alarm_passive -> detect_threat [label="Evet"];
    check_alarm_passive -> wait [label="Hayır (Zaten Aktif)"];
    
    detect_threat -> check_threat_level;
    
    check_threat_level -> action_high [label="Yüksek"];
    check_threat_level -> action_medium [label="Orta"];
    check_threat_level -> action_low [label="Düşük"];
    check_threat_level -> wait [label="Yok"];
    
    action_high -> wait;
    action_medium -> wait;
    action_low -> wait;
    
    // Sonsuz Döngüyü oluşturan geri ok ve etiket
    wait -> read_sensors [label="Sürekli", style=dashed, color=blue, arrowhead=normal];
}
